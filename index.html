<!DOCTYPE html><html><head><style type="text/css">


body {
    background-color: black;
    color: #AAAAAA;
}
input {
    background-color: gray;
    margin: 0px;
    padding: 0px;
    border: 0px;
    margin-bottom: 2px;
    width: 100%;
}


</style><script type="text/javascript" src="jquery.js"></script><script type="text/javascript">


function init() {
    var autologin = window.localStorage.getItem('autologin');
    $('#debug').append('DEBUGautologin');
    $('#debug').append(autologin);
    if(autologin == 'true') {
        var user = window.localStorage.getItem('user');
        var passwd = window.localStorage.getItem('passwd');
        $('#debug').append('DEBUGuser');
        $('#debug').append(user);
        $('#debug').append('DEBUGpasswd');
        $('#debug').append(passwd);
        login(user, passwd);
    }
    output();
}

lid = 0;
function output() {
    $.get('https://gamemodeon.de/sb/output.php?lid='+lid+'&time='+new Date, function(data){
        if(data != '') {
            var lmsg = data.split("\n")
            lid = lmsg[0];
            $('#output').prepend(lmsg[1]);
        }
    });
    setTimeout("output()", 1000);
}

function savelogin() {
    $('#debug').append('DEBUGsavelogin');
    window.localStorage.setItem('user', user);
    window.localStorage.setItem('passwd', passwd);
    window.localStorage.setItem('autologin', 'true');
}

function login(user, passwd) {
    user = user || $('[name="user"]').val();
    passwd = passwd || $('[name="passwd"]').val();
    $.post("https://gamemodeon.de/sb/input-login.php", { user: user, passwd: passwd }).done(function(data) {
        if(data != '') {
            sid = data;
            $('#login').hide();
            $('#input').show();
            if($('[name="savelogin"]').prop('checked')) {
                savelogin();
            }
        } else {
            $('#errorlogin').show();
        }
    });
}

function input() {
    var message = $('[name="message"]').val();
    $.post("https://gamemodeon.de/sb/input-login.php", { sid: sid, message: message }).done(function(data) {
        $('[name="message"]').val('');
    });
}


</script></head><body>


<div id="debug"></div>
<div id="login">
    <input type="text" value="Username" name="user"><br>
    <input type="password" value="Passwort" name="passwd"><br>
    <input type="checkbox" value="" name="savelogin"> Login speichern<br>
    <input type="submit" onclick="login();" value="Login">
    <div id="errorlogin" style="display:none;color:red;">Fehlerhafter Login. Bitte versuchen Sie es erneut!</div>
</div>

<div id="input" style="display:none;">
    <input type="text" id="message" name="message"><br>
    <input type="submit" onclick="input();" value="SHOUT">
</div>


<div id="output"></div><script type="text/javascript">init();</script></body></html>
